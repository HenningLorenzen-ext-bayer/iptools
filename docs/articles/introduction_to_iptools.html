<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Introduction to iptools. iptools</title><!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous"><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <div class="container">
      <header><div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">iptools</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/hrbrmstr/iptools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to iptools</h1>
                        <h4 class="author">Oliver Keyes</h4>
            
            <h4 class="date">2016-10-05</h4>
          </div>

    
    
<div id="ip-handling-conversion-and-validation" class="section level2">
<h2>IP handling, conversion and validation</h2>
<p><code>iptools</code> is a package to make IP addresses convenient to deal with, parse and validate. It is heavily influenced by the Python <a href="https://python-iptools.readthedocs.org/en/latest/">iptools</a> module, and will hopefully make users&rsquo; lives a heck of a lot easier if they have to deal with IP data. Much of it is currently IPv4-specific, out of necessity, but as R&rsquo;s support for bigger numbers increases, we&rsquo;ll hopefully make as much of it support IPv6 as possible!</p>
<div id="validating-converting-and-classifying-ip-addresses" class="section level3">
<h3>Validating, converting and classifying IP addresses</h3>
<p>How do you know an IP address is an IP address? How do you know what <em>type</em> of IP address it is? Most of the time the answer is a complicated regular expression, made more complicated by the need to check for things that are syntactically valid IP addresses, but aren&rsquo;t actually possible. <code>iptools</code> contains <code>ip_classify</code>, which accepts a vector of IP addresses (or things that might be IP addresses) and identifies whether they&rsquo;re valid - and if they are valid, what type they are.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ips &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"192.168.0.1"</span>, <span class="st">"2607:f8b0:4006:80b::aaa"</span>,
         <span class="st">"the next IP is also invalid"</span>, <span class="st">"256.256.190.900"</span>)
<span class="kw"><a href="../reference/ip_classify.html">ip_classify</a></span>(ips)
[<span class="dv">1</span>] <span class="st">"IPv4"</span>    <span class="st">"IPv6"</span>    <span class="st">"Invalid"</span> <span class="st">"Invalid"</span></code></pre></div>
<p>Once you&rsquo;ve validated and classified the IPs, you might want to look at them in their numeric form, rather than the &ldquo;dotted-decimal&rdquo; form - or you might have numeric forms, and need dotted-decimal. Either way, there&rsquo;s a function for it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#Dotted-decimal to numeric</span>
ips &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"192.168.0.1"</span>,<span class="st">"172.18.0.0"</span>,<span class="st">"172.18.0.15"</span>)
numeric_ips &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ip_to_numeric.html">ip_to_numeric</a></span>(ips)
numeric_ips
[<span class="dv">1</span>] <span class="dv">3232235521</span> <span class="dv">2886860800</span> <span class="dv">2886860815</span>

<span class="co">#And back again</span>
<span class="kw"><a href="../reference/ip_to_numeric.html">numeric_to_ip</a></span>(numeric_ips)
[<span class="dv">1</span>] <span class="st">"192.168.0.1"</span> <span class="st">"172.18.0.0"</span>  <span class="st">"172.18.0.15"</span></code></pre></div>
<p>These functions only currently work for IPv4 IPs - we&rsquo;ll have IPv6 support as soon as R can handle numbers that big!</p>
</div>
<div id="resolving-hostnames" class="section level3">
<h3>Resolving hostnames</h3>
<p>The <code>iptools</code> package has integrated the <code>AsioHeaders</code> package which includes the <a href="http://think-async.com/">asio networking library</a>. Thanks to this we can take a hostname and work out what IP address(es) are associated with it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/hostname_to_ip.html">hostname_to_ip</a></span>(<span class="st">"lga15s49-in-f6.1e100.net"</span>)
[[<span class="dv">1</span>]]
[<span class="dv">1</span>] <span class="st">"173.194.123.102"</span></code></pre></div>
<p>This works in reverse, too:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ip_to_hostname.html">ip_to_hostname</a></span>(<span class="st">"173.194.123.10"</span>)
[[<span class="dv">1</span>]]
[<span class="dv">1</span>] <span class="st">"lga15s46-in-f10.1e100.net"</span></code></pre></div>
<p>Both operations are fully recognised, but aren&rsquo;t particularly fast - in fact, they&rsquo;re incredibly slow compared to the rest of the package - since they need to call out of the system to work. For the same reason, they require a net connection to work, and may slow down said connection while running. You&rsquo;ve been warned.</p>
</div>
<div id="handling-ip-ranges" class="section level3">
<h3>Handling IP ranges</h3>
<p>As well as specific, unique IP addresses, you may also encounter IP ranges - subsets of the IP address space, looking something like &ldquo;172.18.0.0/28&rdquo;. <code>iptools</code> provides a variety of functions to manipulate and expand on these.</p>
<p><code>range_boundaries</code> takes an IP range (or as many IP ranges as you want!) and produces a data.frame containing the smallest-valued and largest-valued IP addresses in that range:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/range_boundaries.html">range_boundaries</a></span>(<span class="kw">c</span>(<span class="st">"172.18.0.0/28"</span>,<span class="st">"148.20.57.0/28"</span>,<span class="st">"148.20.57.0/24"</span>)
   minimum_ip    maximum_ip
<span class="dv">1</span>  <span class="fl">172.18.0.0</span>   <span class="fl">172.18.0.15</span>
<span class="dv">2</span> <span class="fl">148.20.57.0</span>  <span class="fl">148.20.57.15</span>
<span class="dv">3</span> <span class="fl">148.20.57.0</span> <span class="fl">148.20.57.255</span></code></pre></div>
<p>If you want all the values within a certain range, rather than just the smallest and largest, you can use <code>range_generate</code>, which provides you with all of the valid addresses within a specific IP range:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/range_generate.html">range_generate</a></span>(<span class="dt">range =</span> <span class="st">"148.20.57.0/28"</span>)
[<span class="dv">1</span>]  <span class="st">"148.20.57.0"</span>  <span class="st">"148.20.57.1"</span>  <span class="st">"148.20.57.2"</span>  <span class="st">"148.20.57.3"</span>  <span class="st">"148.20.57.4"</span>
[<span class="dv">6</span>]  <span class="st">"148.20.57.5"</span>  <span class="st">"148.20.57.6"</span>  <span class="st">"148.20.57.7"</span>  <span class="st">"148.20.57.8"</span> <span class="st">"148.20.57.9"</span>
[<span class="dv">11</span>] <span class="st">"148.20.57.10"</span> <span class="st">"148.20.57.11"</span> <span class="st">"148.20.57.12"</span> <span class="st">"148.20.57.13"</span> <span class="st">"148.20.57.14"</span> <span class="st">"148.20.57.15"</span></code></pre></div>
<p>On the other hand, if you simply want to check if an IP address is <em>within</em> a certain range, without caring about the range itself, you can use <code>ip_in_range</code>. This accepts a vector of IP addresses and either one range, or an equally-sized vector of ranges, to check them against. It then tells you which of the provided IPs are within the range (TRUE) or not (FALSE):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ips &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"148.20.57.15"</span>, <span class="st">"148.20.57.255"</span>)
<span class="kw"><a href="../reference/ip_in_range.html">ip_in_range</a></span>(ips, <span class="st">"148.20.57.0/28"</span>)
[<span class="dv">1</span>]  <span class="ot">TRUE</span> <span class="ot">FALSE</span></code></pre></div>
</div>
<div id="generating-ip-addresses" class="section level3">
<h3>Generating IP addresses</h3>
<p>Sometimes you need spoof data - IPs that are valid, but aren&rsquo;t sourced from anywhere in particular. <code>iptools</code> contains <code>ip_random</code>, which lets you generate a set of pseudo-random and totally valid IPv4 addresses:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/ip_random.html">ip_random</a></span>(<span class="dt">n =</span> <span class="dv">5</span>)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked"><li><a href="#ip-handling-conversion-and-validation">IP handling, conversion and validation</a></li>
      </ul></div>
      </div>

</div>


      <footer><p>Built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>. Styled with <a href="http://getbootstrap.com">Bootstrap 3</a>.</p>
      </footer></div>

  </body></html>
